# Project Spontaneous Dataset 

Project Requeriments 

Python 3.7 or latest version

- OpenCV: pip install opencv-python
- Pafy: pip install pafy
- Numpy: pip install numpy 
- Youtube-dl: pip install youtube_dl
- Image: pip install image
- Face Recognition: pip install face-recognition
- Pillow: pip install Pillow==2.2.2
- MTCNN: pip install mtcnn
- Dlib: pip install dlib
- TensorFlow: pip install tensorflow


# Download Video Frames 

- STEP 1: in file [src\preparation\runDownloadFrame.py](https://github.com/viitormiiguel/proj_faces/blob/master/src/preparation/runDownloadFrame.py), you must change the folder would you like save the frames from video react.

```python 
# ========================================================
## Local de armazenamento das imagens geradas            #
database_img = 'E:/Dataset_Faces/'                       #
# ========================================================
```

- STEP 2: run the file [src\preparation\runForceDownload.py](https://github.com/viitormiiguel/proj_faces/blob/master/src/preparation/runForceDownload.py), 
following the 3 parameters:
  * __txt_url__ = ID YoutubeVideo
  * __name_folder__ = Folder name movie and folder ID video (Example: Avengers/HlDYdpH2k9k)
  * __type__ = PROCESSED (frames react video) or RAW (frames original trailer video)

```python 
buscaFrame('HlDYdpH2k9k', 'Avengers End Game' + '/HlDYdpH2k9k', 'processed')
```

# Annotated Video Time

- The process to annotated video time is manually and consist via visual inspection in the folders generated by Download Video Frames, get the frame number in which begin and finish the reaction about movie. Create a text file, and write de id youtube video, initial frame and end frame, separated by comma, as shown in [log_search.txt](https://github.com/viitormiiguel/proj_faces/blob/master/extras/log_search.txt). And Save the file in folder where contains the all video frames downloaded, named __log_search.txt__.

```python 
# ==============================================================
## Local de armazenamento das Arquivo anotado                 #
'E:/Dataset_Faces/Movie_Name/log_search.txt'                  #
# =============================================================
```

# Frames and Face images

- Preview frames and face images generated.

<table>
  <tr>
     <td>E:/Dataset_Faces/Movie_Name/id_video/frames</td>
     <td>E:/Dataset_Faces/Movie_Name/id_video/faces</td>
  </tr>
  <tr>
    <td><img src="https://github.com/viitormiiguel/proj_faces/blob/master/extras/examples/frames.JPG" width="75%%" height="auto"></td>
    <td><img src="https://github.com/viitormiiguel/proj_faces/blob/master/extras/examples/faces.JPG" width="75%%" height="auto"></td>
  </tr>
 </table>
 
 # Run Analysis
 
 :point_right: Warning: verify the images path inside main function in each file :point_left:
 
 <!-- - 1º [runSplitMomentsInd](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runSplitMomentsInd.py) and [runSplitMomentsGrp](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runSplitMomentsGrp.py)
 - 2º [runAusMomentsInd](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runAusMomentsInd.py) and [runAusMomentsGrp](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runAusMomentsGrp.py)
 - 3º [runFirstAnalysisInd](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runFirstAnalysisInd.py) and [runFirstAnalysisGrp](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runFirstAnalysisGrp.py)
 - 4º [runJoinResults](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runJoinResults.py)
 - 5º [runMovingAnalysis](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runMovingAnalysis.py)
 - 6º [runAddPresenceAus](https://github.com/FacesSpont/proj_faces/blob/master/src/preparation/runAddPresenceAus.py) -->

- 1º runAusMomentsInd and runAusMomentsGrp
- 2º runAnalysisCompletes
- 3º runAddPresenceAusComplete